<div class="modal" tabindex="-1" role="dialog">
  <div class="modal-dialog report-export-dialog">
    <form name="form" class="modal-content">

      <div class="modal-header">
        <label for="report-name">{{ report.name }}</label>
        <button type="button" class="btn btn-plain pull-right" ng-click="cancel()" title="Close"><i class="fa fa-times-circle"></i></button>
      </div>

      <div class="modal-body">
        <div class="file-extension-container">
          <label class="form-grid-group form-group">
            <span>File Type:</span>
            <select selectize class="form-control"
              selectize-options="settings.exportOptions"
              selectize-settings="{ valueField: 'value', dropdownParent: 'body', maxItems: 1 }"
              ng-model="settings.fileExtension">
            </select>
          </label>
          <div class="export-group_by" ng-if="settings.fileExtension === 'pdf'">
              <label>
                Group By Category? 
                <input type="checkbox" ng-model="settings.groupByCategory"/>
              </label>
          </div>
        </div>
        <div class="export-details-container" ng-if="settings.fileExtension === 'pdf'">
          <label class="export-details-selection" ng-class="{ active: isActive('table')}">
            <input type="radio" ng-model="settings.exportDetails" value="table"/>
            <i class="fa fa-table"></i>
            <h5>Table Only</h5>
          </label>
          <label class="export-details-selection" ng-class="{ active: isActive('table&images')}">
            <input type="radio" ng-model="settings.exportDetails" value="table&images"/>
            <i class="fa fa-table"></i>+
            <i class="fa fa-image"></i>
            <h5>Table & Images</h5>
          </label>
          <label class="export-details-selection" ng-class="{ active: isActive('images&itemizations')}">
            <input type="radio" ng-model="settings.exportDetails" value="images&itemizations"/>
            <i class="fa fa-image"></i>+
            <i class="fa fa-list-ul"></i>
            <h5>Images & Itemizations</h5>
          </label>
          <label class="export-details-selection" ng-class="{ active: isActive('table&images&itemizations')}">
            <input type="radio" ng-model="settings.exportDetails" value="table&images&itemizations"/>
            <i class="fa fa-table"></i>+
            <i class="fa fa-image"></i>+
            <i class="fa fa-list-ul"></i>
            <h5>Table, Images & Itemizations</h5>
          </label>
        </div>
      </div>

      <div class="modal-footer">
        <center class="text-danger" ng-if="message">{{ message }}</center>

        <button type="button" class="btn btn-default pull-left"
          ng-click="$emit('reports:editReport', report); cancel()">
          Back
        </button>

        <button type="button" class="btn btn-success"
          ng-click="generate()"
          ng-if="!processing && (!reportUrl || form.$dirty)"
          >
          Generate
        </button>

        <div ng-if="processing">
          Generating Report <i class="fa fa-spin fa-spinner"></i>
        </div>

        <a class="btn btn-primary" ng-if="reportUrl && form.$pristine" download="{{ reportName }}" ng-href="{{ reportUrl }}">
          Download
        </a>
        </div>
      </div>
    </form>
  </div>
</div>
